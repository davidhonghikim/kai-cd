flowchart TD
    subgraph User
        U1["User"]
    end
    subgraph Extension
        UI["UI (Popup, Sidepanel, Tab)"]
        BG["Background Script"]
        ST["Storage (IndexedDB, LocalStorage)"]
        CFG["Config & Settings"]
        ART["Artifact Manager"]
        THEME["Theme Manager"]
    end
    subgraph Services
        S1["LLM Connectors"]
        S2["Image Gen Connectors"]
        S3["Automation Connectors"]
        S4["Vector Search Connectors"]
    end
    U1-- Interacts -->UI
    UI-- Sends requests -->BG
    BG-- Reads/Writes -->ST
    BG-- Loads/Saves -->CFG
    BG-- Manages -->ART
    BG-- Manages -->THEME
    BG-- Communicates -->S1
    BG-- Communicates -->S2
    BG-- Communicates -->S3
    BG-- Communicates -->S4
    UI-- Loads iframes -->S1
    UI-- Loads iframes -->S2
    UI-- Loads iframes -->S3
    UI-- Loads iframes -->S4
    ART-- Stores/Fetches -->ST
    THEME-- Applies -->UI
    CFG-- Loads/Saves -->ST 